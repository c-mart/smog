{% extends 'layout.html' %}
{% block title %}
    <h1>smog: Simple Markdown blOG</h1>
{% endblock %}
{% block body %}
    {% if edit == True %}
        <h2>Edit Post</h2>
    {% else %}
        <h2>Create Post</h2>
    {% endif %}
    <form action="{{ url_for('create_edit_post') }}" method="post" class="create-post">
        <p>
            <h3>Title</h3>
            <input type="text" size="50" name="title" value="{{ formdata['title'] }}" />
        </p>
        <p>
            <h3>Body</h3>
            <textarea name="body" rows="20" cols="80">{{ formdata['body'] }}</textarea>
        </p>
        <p>
            <h3>Short description</h3>
            <input type="text" size="50" name="description" value="{{ formdata['description'] }}"/><br />
            (Generated from title if left blank)
        </p>
        <p>
            <h3>Permalink</h3>
            <input type="text" size="50" name="permalink" value="{{ formdata['permalink'] }}" /><br />
            Allowed characters are alphanumeric, hyphen, and underscore. All others will be stripped.<br />
            (Generated from title if left blank)<br />
        </p>
        <p>
            <input type="checkbox" name="published" value="True"
                   {% if formdata.published == False %}
                   {% else %}
                       checked="True"
                   {% endif %} /> Published
        </p>
        <p>
            <input type="checkbox" name="comments_allowed" value="True"
                   {% if formdata['comments_allowed'] == False %}
                   {% else %}
                   checked="True"
                   {% endif %} /> Comments allowed
        </p>
        <p>
            <input type="hidden" name="update_id" value="{{ formdata['id'] }}" />
            <input type="submit" value="Save" />
        </p>
    </form>
    {% if formdata['id'] %}
        <p><a href="{{ url_for('delete_post', post_id = formdata['id']) }}">Delete post</a></p>
    {% endif %}
{% endblock %}